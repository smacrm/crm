<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <ui:include src="/parallels/menu.xhtml"/>
    <p:blockUI block="schedule" widgetVar="widgetSchedule"/>
    <h:panelGrid id="scheduleTable" style="width: 100%;margin: 0;padding: 0">
        <p:schedule id="schedule"
                    widgetVar="CRMCloudSchedule"
                    axisFormat="#{crmcloud['label.axis.format']}"
                    value="#{scheduleController.eventModel}"
                    locale="#{login.userDto.language}"
                    timeZone="#{login.userDto.timeZone}"
                    firstHour="09"> 
            <p:ajax event="dateSelect" listener="#{scheduleController.onDateSelect}" update="eventDetails" oncomplete="PF('widgetSchedule').show();PF('eventDialog').show();" />
            <p:ajax event="eventSelect" listener="#{scheduleController.onEventSelect}" update="eventDetails" oncomplete="PF('widgetSchedule').show();PF('eventDialog').show();" />
            <p:ajax event="eventMove" listener="#{scheduleController.onEventMove}" update="messages" />
            <p:ajax event="eventResize" listener="#{scheduleController.onEventResize}" update="messages" />
        </p:schedule>
    </h:panelGrid>
    <p:dialog widgetVar="eventDialog" header="Event Details" onHide="PF('widgetSchedule').hide();" showEffect="clip" hideEffect="clip" dynamic="true" responsive="true">
        <h:panelGrid id="eventDetails" columns="2"> 
            <p:outputLabel for="title" value="Titles:" />
            <p:inputText id="title" value="#{scheduleController.event.title}" />

            <p:outputLabel for="from" value="From:" />
            <p:calendar id="from"
                        mask="true"
                        value="#{scheduleController.event.startDate}"
                        timeZone="#{login.userDto.timeZone}"
                        pattern="#{scheduleController.dateTimeModel.datetimenotsecond}"
                        locale="#{login.userDto.language}"
                        styleClass="gn_span_datetime" />

            <p:outputLabel for="to" value="To:" />
            <p:calendar id="to"
                        mask="true"
                        value="#{scheduleController.event.endDate}"
                        timeZone="#{login.userDto.timeZone}"
                        pattern="#{scheduleController.dateTimeModel.datetimenotsecond}"
                        locale="#{login.userDto.language}"
                        styleClass="gn_span_datetime" />

            <p:outputLabel for="allDay" value="All Day:" />
            <h:selectBooleanCheckbox id="allDay" value="#{scheduleController.event.allDay}" />

            <p:commandButton type="reset" value="Reset" />
            <p:commandButton id="addButton"
                             value="Save"
                             actionListener="#{scheduleController.addEvent}"
                             oncomplete="PF('CRMCloudSchedule').update();PF('eventDialog').hide();" />
        </h:panelGrid>
    </p:dialog>

    <ui:include src="/parallels/locale.xhtml"/>
</ui:composition>

