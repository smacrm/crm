<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html">
    <div id="pageTitle">#{companyBundle['label.group.title']} #{msg['symbol.paren.left']}#{companyBundle['label.group.title.detail']}#{msg['symbol.paren.right']}</div>
    <h:form id="frmViewCompanyInfo">
        <p:confirmDialog message="#{msg['label.dialog.confirm']}" header="#{msg['label.dialog.header']}"  widgetVar="confirmDeleteGroup" id="confirmDeleteGroup">  
            <p:commandButton value="#{msg['label.dialog.yes']}" onclick="PF('confirmDeleteGroup').hide();" update="mainContent :growl"
                             actionListener="#{groupController.delete}" title="accept" icon="ui-icon-check">
                <f:param name="groupId" value="#{groupController.groupModel.group.groupId}"/>
                <f:param name="force" value="true"/>
            </p:commandButton>
            <p:commandButton value="#{msg['label.dialog.no']}" onclick="PF('confirmDeleteGroup').hide();" type="button" title="close" icon="ui-icon-close"/>   
        </p:confirmDialog>
        <h:panelGrid width="100%" styleClass="page-header">
            <f:facet name="header">
                <div class="row">
                    <div class="col-md-6">
                        <h1>
                            #{companyBundle['label.group.title']}
                            <small>#{companyBundle['label.group.title.detail']}</small>
                        </h1>
                    </div>
                    <div class="col-md-6 text-right">
                        <p:commandButton value="#{msg['label.back']}" icon="fa fa-chevron-circle-left" actionListener="#{groupController.load}"
                                         title="#{msg['label.back']}" update="mainContent"
                                         onstart="start()" onsuccess="finish()">
                            <f:param name="force" value="true"/>
                        </p:commandButton>
                        <p:commandButton value="#{msg['label.edit']}" icon="fa fa-pencil fa-fw"
                                         title="#{msg['label.edit']}"
                                         update="mainContent" actionListener="#{groupController.show}"
                                         id="btnEdit"
                                         onstart="start()" onsuccess="finish()"
                                         rendered="${sec.hasMethod('GroupController', 'update')}">
                            <f:param name="showType" value="edit"/>
                            <f:param name="groupId" value="#{groupController.groupModel.group.groupId}"/>
                            <f:param name="force" value="true"/>
                        </p:commandButton>
                        <p:commandButton value="#{msg['label.delete']}" title="#{msg['label.delete']}"
                                         icon="fa fa-trash" onclick="PF('confirmDeleteGroup').show();"
                                         type="button" id="btnDelete"
                                         rendered="${sec.hasMethod('GroupController', 'delete')}">
                            <f:param name="force" value="true"/>
                        </p:commandButton> 
                        <div class="ui-buttonset ui-widget">
                        <p:commandButton title="#{msg['label.previous']}" icon="fa fa-angle-left" styleClass="ui-corner-left"
                                         actionListener="#{groupController.previousOne}"
                                         update="gridGroupInfo,btnNext,lblNextPre,btnPrevious,confirmDeleteGroup,btnEdit,btnDelete"
                                         disabled="#{groupController.currentRowNum == 0}" id="btnNext"
                                         onstart="start()" onsuccess="finish()"
                                         rendered="#{sec.master}"/>
                        <p:commandButton value="#{groupController.currentRowNum + 1}/#{groupController.groupModels.rowCount}" styleClass="ui-corner-none" id="lblNextPre"
                                         rendered="#{sec.master}"/>
                        <p:commandButton title="#{msg['label.next']}" icon="fa fa-angle-right" styleClass="ui-corner-right" id="btnPrevious"
                                         actionListener="#{groupController.nextOne}"
                                         update="gridGroupInfo,btnNext,lblNextPre,btnPrevious,confirmDeleteGroup,btnEdit,btnDelete"
                                         disabled="#{groupController.currentRowNum == groupController.groupModels.rowCount -1 }"
                                         onstart="start()" onsuccess="finish()"
                                         rendered="#{sec.master}"/>
                        </div>
                        <p:commandButton value="#{msg['label.print']}" title="#{msg['label.print']}" icon="ui-icon-print" type="button" onstart="start()" onsuccess="finish()">
                            <p:printer target="gridGroupInfo"/>
                        </p:commandButton>
                    </div>
                </div>
            </f:facet>
        </h:panelGrid>
        <div class="box box-solid box-view-mode">
            <div class="box-body">
                <p:panelGrid id="gridGroupInfo" styleClass="crmcloud-panelgrid">
                    
                    <p:row rendered="#{sec.master}">
                        <p:column styleClass="label-field"><p:outputLabel value="#{companyBundle['label.group.company.label']}" styleClass="required"/></p:column>
                        <p:column colspan="3">
                            <p:outputLabel value="#{groupController.groupModel.group.company.companyName}"></p:outputLabel>
                        </p:column>
                    </p:row>
                    
                    <p:row>
                        <p:column styleClass="label-field"><p:outputLabel value="#{companyBundle['label.group.role']}"/></p:column>
                        <p:column colspan="3">
                            <p:outputLabel value="#{groupController.groupModel.viewRoleName}"/>
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column styleClass="label-field"><p:outputLabel value="#{companyBundle['label.group.parent.name']}" /></p:column>
                        <p:column colspan="3">
                            <p:outputLabel value="#{groupController.groupModel.group.parent.groupName}" />
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column styleClass="label-field"><p:outputLabel value="#{companyBundle['label.group.name']}" styleClass="required"/></p:column>
                        <p:column colspan="3">
                            <p:outputLabel value="#{groupController.groupModel.group.groupName}" />
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column styleClass="label-field"><p:outputLabel value="#{msg['label.memo']}"/></p:column>
                        <p:column colspan="3">
                            <p:outputLabel value="#{groupController.groupModel.group.groupMemo}"/>
                        </p:column>
                    </p:row>
                </p:panelGrid></div></div>
    </h:form>
</ui:composition>
