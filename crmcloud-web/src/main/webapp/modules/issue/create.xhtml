<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:outputScript library="js" name="issue.js"  />
    <h:outputStylesheet library="css" name="issue.css"  />
    <div id="pageTitle">#{issue['label.page.issue']}#{msg['symbol.paren.left']}#{msg['label.create']}#{msg['symbol.paren.right']}</div>
    <h:form prependId="false" id="form_issue" styleClass="form_issue" onkeypress="if (event.keyCode === 13 &amp;&amp; $(event.target).prop('tagName') !== 'TEXTAREA') { return false; }">
        <ui:include src="/modules/issue/common/create_title.xhtml" />
        
        <p:outputPanel id="issuePrintBlock" styleClass="box box-view-mode box-widget"> <!-- box-view-mode -->
            <div class="box-body">
                <!-- 受付情報トップ部分 -->
                <!--<h:inputHidden value="${issueController.issue.issueReceivePerson.memberId}" id="issue_receive_person_id" />-->
                <!--<h:inputHidden value="${issueController.issue.creatorId}" id="issue_creator_id" />-->
                <ui:include src="/modules/issue/common/top_base.xhtml" />
                <div class="col-md-12 no-padding" style="margin-top: 0.5em;">
                    <c:set var="hasRoleCUCustomer" value="#{sec.isMaster() or sec.hasMethod('CustomerController', 'CREATE') or sec.hasMethod('CustomerController', 'UPDATE')}" />
                    <div class="#{hasRoleCUCustomer ? 'col-md-6 col-lg-7' : 'col-md-12' } col  no-padding">
                        <!-- 左タップ部分 -->
                        <h:inputHidden value="#{issueController.issue.issueActiveTab}" id="issueActiveTab" />
                        <ui:include src="/modules/issue/common/left_tab.xhtml" >
                            <ui:param name="issue_mode" value="create"/>
                        </ui:include>
                    </div>
                    <h:outputFormat rendered="#{hasRoleCUCustomer}">
                        <div class="col col-md-6 col-lg-5 no-padding-right">
                            <!-- 右タップ部分 -->
                            <h:inputHidden value="#{issueController.issue.issueCustActiveTab}" id="issueCustActiveTab" />
                            <ui:include src="/modules/issue/common/right_tab.xhtml" />
                        </div>
                    </h:outputFormat>
                </div>
            </div>
        </p:outputPanel>

        <!-- カスタマイズJavascript関連処理部分 -->
        <h:outputStylesheet library="plugins" name="multipleselect/jquery.multiselect.css"/>
        <h:outputScript library="plugins" name="multipleselect/jquery.multiselect.min.js"/>
        <h:outputScript library="plugins" name="multipleselect/jquery.multiselect.#{localeController.locale}.js"/>
        <h:outputScript library="formbuilder" name="form-render.js"/>
        <h:outputScript library="js" name="customize-render.js"/>
        
        <!-- 受付情報Javascript関連処理部分 -->
        <h:outputScript library="js" name="select-level.js"/>
        <h:outputScript library="plugins" name="artyom/artyom.min.js"/>
        <h:outputStylesheet library="css" name="member_dialog.css" />
        <h:outputScript library="js" name="speech.js"/>
        
        <!--/////////////////////////////////////D I A L O G/////////////////////////////////////-->
        <ui:include src="/modules/issue/dialog/dialog.xhtml"/>
        <h:outputScript library="js" name="dialog_tree.js"/>
    </h:form>

    <h:outputScript>
        $(function(){
            loadIssueJS();
            callInputKeyUp(false, 'callInputGridTel_');
            callInputKeyUp(true, 'callInputGridTel_');
            callInputKeyUp(false, 'callInputGridMobile_');
            callInputKeyUp(true, 'callInputGridMobile_');
        });
    </h:outputScript>
</ui:composition>
