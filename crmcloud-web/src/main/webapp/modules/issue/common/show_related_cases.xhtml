<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

<p:panelGrid style="width: 100%;" styleClass="panelGrid_related_cases">
    <f:facet name="header">
    <p:row>
        <p:column>
            <h:outputLabel value="${issue['label.related_cases_number']}" />
        </p:column>
        <p:column>
            <h:outputLabel value="${issue['label.issue_receive_date']}" />
        </p:column>
        <p:column>
            <h:outputLabel value="${issue['label.issue_proposal_name_1']}" />
        </p:column>
        <p:column>
            <h:outputLabel value="${issue['label.related_cases_comment']}" />
        </p:column>
        <p:column>&#xA0;</p:column>
    </p:row>
    </f:facet>

    <c:forEach var="related" items="${issueController.issue.relatedCases}" >
        <p:row styleClass="panelGrid_related_cases_tr">
            <p:column>
                <h:outputLabel value="${related.issueRelatedId.issueViewCode}" />
            </p:column>
            <p:column>
            <h:outputLabel value="${related.issueRelatedId.issueReceiveDate}" >
                <f:convertDateTime type="date" pattern="yyyy/MM/dd" />
            </h:outputLabel>
            </p:column>
            <p:column>
                <h:outputLabel value="${related.issueRelatedId.issueProposalName}" />
            </p:column>
            <p:column>
                <h:outputLabel value="${related.issueRelatedComment}" />
            </p:column>
            <p:column styleClass="td_minus">
                <p:commandLink 
                    actionListener="${issueController.deleteRelatedCases}"
                    title="${issue['label.tab_related_cases']}${msg['label.delete']}"
                    style="float: right;"
                    update="mainContent, :growl"
                    styleClass="btn btn-xs btn-default"
                    onstart="start()" onsuccess="finish()">
                        <f:param name="relatedId" value="${related.relatedId}" />
                        <span class="fa fa-minus-circle"></span>
                        <p:confirm
                            header="${msg['label.delete']}"
                            message="${issue['label.delete_related_cases']}"
                            icon="ui-icon-alert" />
                </p:commandLink>
            </p:column>
        </p:row>
    </c:forEach>
</p:panelGrid>
</ui:composition>
