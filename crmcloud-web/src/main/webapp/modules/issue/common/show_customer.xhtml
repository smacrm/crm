<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <c:if test="#{empty renderTitle or renderTitle eq 'true'}">
        <f:facet name="title">
            <h:outputText value="#{issue['label.page.customer']}" rendered="#{tabIndex.index eq 0}"/>
            <h:outputText value="(#{tabIndex.index})" rendered="#{tabIndex.index ne 0}"/>
        </f:facet>
    </c:if>
    <p:panelGrid style="width: 100%;" styleClass="panelGrid_td_line_height ui-panelgrid-color">
        <p:row>
            <p:column styleClass="td_15">
                <h:outputText value="${issue['label.cust_cooperation_name']}"/>
            </p:column>
            <p:column styleClass="td_35">
                <h:outputText value="#{customer.custCooperationId.getItemViewData(localeController.locale)}" />
            </p:column>
            <p:column styleClass="td_15">
                <h:outputText value="${issue['label.cust_special_name']}"/>
            </p:column>
            <p:column>
                <h:outputText value="#{customer.custSpecialId.getItemViewData(localeController.locale)}" />
            </p:column>
        </p:row>
        <p:row>
            <p:column>
                <h:outputText value="#{issue['label.cust_code']}"/>
            </p:column>
            <p:column>
                <h:outputText value="#{customer.custCode}"/>
            </p:column>
        </p:row>
        <p:row>
            <p:column>
                <h:outputText value="${issue['label.name_kana']}" />
            </p:column>
            <p:column colspan="3">
                <h:outputText value=" #{customer.custFullKana}" style="white-space: normal !important; word-break: break-word !important;"/>
            </p:column>
        </p:row>
        <p:row>
            <p:column>
                <h:outputText value="${issue['label.name_hira']}" />
            </p:column>
            <p:column colspan="3">
                <h:outputText value=" #{customer.custFullHira}" style="white-space: normal !important; word-break: break-word !important;"/>
            </p:column>
        </p:row>
        <p:row>
            <p:column>
                <h:outputText value="${issue['label.cust_sex_name']}" />
            </p:column>
            <p:column>
                <h:outputText value="#{customer.custSexId.getItemViewData(localeController.locale)}" />
            </p:column>
            <p:column>
                <h:outputText value="${issue['label.cust_age_name']}" />
            </p:column>
            <p:column>
                <h:outputText value="#{customer.custAgeId.getItemViewData(localeController.locale)}" />
            </p:column>
        </p:row>
        <p:row>
            <p:column>
                <h:outputText value="${issue['label.post']}" />
            </p:column>
            <p:column>
                <h:outputText value="#{customer.custPost}" />
            </p:column>
            <p:column>
                <h:outputText value="${issue['label.city']}" />
            </p:column>
            <p:column>
                <h:outputText value="#{customer.custCity.prefectureName}" />
            </p:column>
        </p:row>
        <p:row>
            <p:column>
                <h:outputText value="${issue['label.address']}" />
            </p:column>
            <p:column colspan="3">
                <h:outputText value="#{customer.custAddress}" style="white-space: normal !important; word-break: break-word !important;"/>
            </p:column>
        </p:row>
        <p:row>
            <p:column>
                <h:outputText value="${issue['label.address_kana']}" />
            </p:column>
            <p:column colspan="3">
                <h:outputText value="#{customer.custAddressKana}" style="white-space: normal !important; word-break: break-word !important;"/>
            </p:column>
        </p:row>

        <c:forEach var="tel" items="#{customer.tel}" varStatus="telStatus">
            <p:row>
                <p:column styleClass="td_15">
                    <h:outputText value="${issue['label.tel']}" rendered="${(telStatus.index == 0)}" />
                    <h:outputText value="${issue['label.tel']} ${telStatus.index+1}" rendered="${(telStatus.index > 0)}" />
                </p:column>
                <p:column styleClass="td_35">
                    <h:outputText class="input_tel" value="#{tel.custTargetData}" />
                    <p:commandButton
                        style="float: right;"
                        icon="fa fa-phone"
                        type="button"
                        styleClass="commandButton_small_button #{not empty tel.custTargetData ? '': 'hide'}"
                        onclick="CRMCloudTwilio.startCallToNumber($.trim($(this).closest('td').find('.input_tel').text()), '#{customer.custFullHira}')"
                        rendered="#{not empty softphone_mode and softphone_mode eq 'twilio' }"/>
                    <p:commandButton
                        style="float: right;"
                        icon="fa fa-phone"
                        styleClass="commandButton_small_button #{not empty tel.custTargetData ? '': 'hide'}"
                        actionListener="#{issueController.call()}"
                        rendered="#{not empty softphone_mode and softphone_mode eq 'itelpy' }"/>
                </p:column>
                <p:column styleClass="td_15">
                    <h:outputText value="${issue['label.session']}" />
                </p:column>
                <p:column style="white-space: nowrap">
                    <h:outputText value="#{tel.custTargetClass.getItemViewData(localeController.locale)}" />
                </p:column>
            </p:row>
        </c:forEach>
        <c:forEach var="mobile" items="#{customer.mobile}" varStatus="mobileStatus">
            <p:row>
                <p:column styleClass="td_15">
                    <h:outputText value="${issue['label.mobile']}" rendered="${(mobileStatus.index == 0)}" />
                    <h:outputText value="${issue['label.mobile']} ${mobileStatus.index+1}" rendered="${(mobileStatus.index > 0)}" />
                </p:column>
                <p:column styleClass="td_35">
                    <h:outputText class="input_tel" value="#{mobile.custTargetData}" />
                    <p:commandButton
                        style="float: right;"
                        icon="fa fa-phone"
                        styleClass="commandButton_small_button #{not empty mobile.custTargetData ? '': 'hide'}"
                        onclick="CRMCloudTwilio.startCallToNumber($.trim($(this).closest('td').find('.input_tel').text()), '#{customer.custFullHira}')"
                        rendered="#{not empty softphone_mode and softphone_mode eq 'twilio' }"/>
                    <p:commandButton
                        style="float: right;"
                        icon="fa fa-phone"
                        styleClass="commandButton_small_button #{not empty mobile.custTargetData ? '': 'hide'}"
                        actionListener="#{issueController.call()}"
                         rendered="#{not empty softphone_mode and softphone_mode eq 'itelpy' }"/>
                </p:column>
                <p:column styleClass="td_15">
                    <h:outputText value="${issue['label.session']}" />
                </p:column>
                <p:column style="white-space: nowrap">
                    <h:outputText value="#{mobile.custTargetClass.getItemViewData(localeController.locale)}" />
                </p:column>
            </p:row>
        </c:forEach>

        <c:forEach var="mail" items="#{customer.mail}" varStatus="mailStatus">
            <p:row>
                <p:column styleClass="td_15">
                    <h:outputText value="${issue['label.mail']}" rendered="${(mailStatus.index == 0)}" />
                    <h:outputText value="${issue['label.mail']} ${(mailStatus.index+1)}" rendered="${(mailStatus.index > 0)}" />
                </p:column>
                <p:column colspan="3" style="white-space: nowrap">
                    <h:outputText value="#{mail.custTargetData}" />
                </p:column>
            </p:row>
        </c:forEach>

        <p:row>
            <p:column>
                <h:outputText value="${issue['label.memo']}" />
            </p:column>
            <p:column colspan="3">
                <p:inputTextarea
                    rows="3"
                    autoResize="false"
                    readonly="true"
                    value="${customer.custMemo}"
                    style="width: 100%"
                    styleClass="font_weight_normal inputTextareaNotBorder" />
            </p:column>
        </p:row>
    </p:panelGrid>

</ui:composition>
