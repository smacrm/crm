<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <f:view locale="#{localeController.locale}">
        <f:metadata>
            <f:viewParam name="id" value="#{issueController.issue.issueId}"/>
        </f:metadata>
        <h:head>
            <title>${issue['label.issue_proposal_name']}</title>
            <h:outputStylesheet library="css" name="dialog_growl.css"  />
            <h:outputStylesheet library="css" name="dialog.css"  />
        </h:head>
        <h:body styleClass="bodyDailog">
            <h:form prependId="false">
                <p:growl id="dialog_growl" showDetail="false" life="3000" />
                <p:remoteCommand name="dbClick" actionListener="#{issueController.onLinkDoubleSelect('issue_proposal_id')}" />
                <p:panel styleClass="panelSreachProducts">
                    <p:commandButton type="button" icon="fa fa-search" />
                    <p:inputText
                        style="margin-right: 0.5em;"
                        onkeyup="var keyword = $(this).val().toLowerCase(); $('#dataListIssueProposalList_3 .ui-datalist-data > li').each(function(){
                            if ($(this).text().toLowerCase().indexOf(keyword) === -1){
                                $(this).hide();
                            }else{
                                $(this).show();
                            }
                        })"
                        placeholder="#{msg['label.keyword']}" />
                </p:panel>
                <p:panelGrid columns="4" styleClass="panelGridDataListProducts">
                    <p:dataList
                        itemType="none"
                        id="dataListIssueProposalList_1"
                        var="proposal1"
                        value="#{issueController.select.get('issue_proposal_id')}">
                        <f:facet name="header"><p:outputLabel value="${issue['label.issue_proposal_name_1']}" /></f:facet>
                        <p:commandLink
                            ondblclick="dbClick()"
                            onclick="$(this).closest('ul').find('a').removeClass('aSelected');$(this).addClass('aSelected');"
                            actionListener="${issueController.onLinkSelect(proposal1, 1)}"
                            update=":dataListIssueProposalList_2, :dataListIssueProposalList_3"
                            process="@this"
                            rendered="#{proposal1.value.itemLevel eq 1}"
                            styleClass="#{issueController.proposalDialogSelected.get(1).value.itemId eq proposal1.value.itemId ? 'aSelected' : ''}"
                            style="white-space: normal !important; word-break: break-word !important;">
                            <p:outputLabel styleClass="outputLabelBorderCircle" value="#{proposal1.value}" />
                            <h:outputText value="#{proposal1.label}" />
                        </p:commandLink>
                    </p:dataList>
                    <p:dataList
                        itemType="none"
                        id="dataListIssueProposalList_2"
                        var="proposal2"
                        value="#{issueController.select.get('issue_proposal_id')}">
                        <f:facet name="header"><p:outputLabel value="${issue['label.issue_proposal_name_2']}" /></f:facet>
                        <p:commandLink
                            ondblclick="dbClick()"
                            onclick="$(this).closest('ul').find('a').removeClass('aSelected');$(this).addClass('aSelected');"
                            actionListener="${issueController.onLinkSelect(proposal2, 2)}"
                            update=":dataListIssueProposalList_3"
                            process="@this"
                            rendered="#{proposal2.value.itemLevel eq 2 and proposal2.value.itemParent.itemId eq issueController.proposalDialogSelected.get(1).value.itemId}"
                            styleClass="#{issueController.proposalDialogSelected.get(2).value.itemId eq proposal2.value.itemId ? 'aSelected' : ''}"
                            style="white-space: normal !important; word-break: break-word !important;">
                            <p:outputLabel styleClass="outputLabelBorderCircle" value="#{proposal2.value}" />
                            <h:outputText value="#{proposal2.label}" />
                        </p:commandLink>
                    </p:dataList>
                    <p:dataList
                        itemType="none"
                        id="dataListIssueProposalList_3"
                        var="proposal3"
                        value="#{issueController.select.get('issue_proposal_id')}">
                        <f:facet name="header"><p:outputLabel value="${issue['label.issue_proposal_name_3']}" /></f:facet>
                        <p:commandLink ondblclick="dbClick()"
                            onclick="$(this).closest('ul').find('a').removeClass('aSelected');$(this).addClass('aSelected');"
                            actionListener="${issueController.onLinkSelect(proposal3, 3)}"
                            process="@this"
                            rendered="#{proposal3.value.itemLevel eq 3 and proposal3.value.itemParent.itemId eq issueController.proposalDialogSelected.get(2).value.itemId}"
                            styleClass="#{issueController.proposalDialogSelected.get(3).value.itemId eq proposal3.value.itemId ? 'aSelected' : ''}"
                            style="white-space: normal !important; word-break: break-word !important;">
                            <p:outputLabel styleClass="outputLabelBorderCircle" value="#{proposal3.value}" />
                            <h:outputText value="#{proposal3.label}" />
                        </p:commandLink>
                    </p:dataList>
                </p:panelGrid>
            </h:form>
        </h:body>
    </f:view>
</html>