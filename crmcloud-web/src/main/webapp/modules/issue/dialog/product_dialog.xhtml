<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <f:view locale="#{localeController.locale}">
        <f:metadata>
            <f:viewParam name="id" value="#{issueController.issue.issueId}"/>
        </f:metadata>
        <h:head>
            <title>${issue['label.issue_product_name']}</title>
            <h:outputStylesheet library="css" name="dialog_growl.css"  />
            <h:outputStylesheet library="css" name="dialog.css"  />
        </h:head>
        <h:body styleClass="bodyDailog">
            <h:form prependId="false">
                <p:growl id="dialog_growl" showDetail="false" life="3000" />
                <p:remoteCommand name="dbClick" actionListener="#{issueController.onLinkDoubleSelect('issue_product_id')}" />
                <p:panel styleClass="panelSreachProducts">
                    <p:commandButton type="button" icon="fa fa-search" />
                    <p:inputText
                        style="margin-right: 0.5em;"
                        onkeyup="var keyword = $(this).val().toLowerCase(); $('#dataListIssueProductList_4 .ui-datalist-data > li').each(function(){
                            if ($(this).text().toLowerCase().indexOf(keyword) === -1){
                                $(this).hide();
                            }else{
                                $(this).show();
                            }
                        })"
                        placeholder="#{msg['label.keyword']}" />
                </p:panel>
                <p:panelGrid columns="4" styleClass="panelGridDataListProducts">
                    <p:dataList
                        itemType="none"
                        id="dataListIssueProductList_1"
                        var="product1"
                        value="#{issueController.select.get('issue_product_id')}">
                        <f:facet name="header"><p:outputLabel value="${issue['label.issue_product_name_1']}" /></f:facet>
                        <p:commandLink
                            ondblclick="dbClick()"
                            onclick="$(this).closest('ul').find('a').removeClass('aSelected');$(this).addClass('aSelected');"
                            actionListener="${issueController.onLinkSelect(product1, 1)}"
                            update=":dataListIssueProductList_2, :dataListIssueProductList_3, :dataListIssueProductList_4"
                            rendered="#{product1.value.itemLevel eq 1}"
                            styleClass="#{issueController.proposalDialogSelected.get(1).value.itemId eq product1.value.itemId ? 'aSelected' : ''}"
                            style="white-space: normal !important; word-break: break-word !important;">
                            <p:outputLabel styleClass="outputLabelBorderCircle" value="#{product1.value}" />
                            <h:outputText value="#{product1.label}" />
                        </p:commandLink>
                    </p:dataList>
                    <p:dataList
                        itemType="none"
                        id="dataListIssueProductList_2"
                        var="product2"
                        value="#{issueController.select.get('issue_product_id')}">
                        <f:facet name="header"><p:outputLabel value="${issue['label.issue_product_name_2']}" /></f:facet>
                        <p:commandLink
                            ondblclick="dbClick()"
                            onclick="$(this).closest('ul').find('a').removeClass('aSelected');$(this).addClass('aSelected');"
                            actionListener="${issueController.onLinkSelect(product2, 2)}"
                            update=":dataListIssueProductList_3, :dataListIssueProductList_4"
                            rendered="#{product2.value.itemLevel eq 2 and product2.value.itemParent.itemId eq issueController.proposalDialogSelected.get(1).value.itemId}"
                            styleClass="#{issueController.proposalDialogSelected.get(2).value.itemId eq product2.value.itemId ? 'aSelected' : ''}"
                            style="white-space: normal !important; word-break: break-word !important;">
                            <p:outputLabel styleClass="outputLabelBorderCircle" value="#{product2.value}" />
                            <h:outputText value="#{product2.label}" />
                        </p:commandLink>
                    </p:dataList>
                    <p:dataList
                        itemType="none"
                        id="dataListIssueProductList_3"
                        var="product3"
                        value="#{issueController.select.get('issue_product_id')}">
                        <f:facet name="header"><p:outputLabel value="${issue['label.issue_product_name_3']}" /></f:facet>
                        <p:commandLink
                            ondblclick="dbClick()"
                            onclick="$(this).closest('ul').find('a').removeClass('aSelected');$(this).addClass('aSelected');"
                            actionListener="${issueController.onLinkSelect(product3, 3)}"
                            update=":dataListIssueProductList_4"
                            rendered="#{product3.value.itemLevel eq 3 and product3.value.itemParent.itemId eq issueController.proposalDialogSelected.get(2).value.itemId}"
                            styleClass="#{issueController.proposalDialogSelected.get(3).value.itemId eq product3.value.itemId ? 'aSelected' : ''}"
                            style="white-space: normal !important; word-break: break-word !important;">
                            <p:outputLabel styleClass="outputLabelBorderCircle" value="#{product3.value}" />
                            <h:outputText value="#{product3.label}" />
                        </p:commandLink>
                    </p:dataList>
                    <p:dataList
                        itemType="none"
                        id="dataListIssueProductList_4"
                        var="product4"
                        value="#{issueController.select.get('issue_products_id')}">
                        <f:facet name="header"><p:outputLabel value="${issue['label.issue_product_name']}" /><p:outputLabel value="&#160;" /></f:facet>
                        <p:commandLink
                            ondblclick="dbClick()"
                            onclick="$(this).closest('ul').find('a').removeClass('aSelected');$(this).addClass('aSelected');"
                            actionListener="${issueController.onLinkSelect(product4, 4)}"
                            rendered="#{product4.value.productsCategorySmallId eq issueController.proposalDialogSelected.get(3).value.itemId}"
                            styleClass="#{issueController.proposalDialogSelected.get(4).value.productsId eq product4.value.productsId ? 'aSelected' : ''}"
                            style="white-space: normal !important; word-break: break-word !important;">
                            <p:outputLabel styleClass="outputLabelBorderCircle" value="#{product4.value}" />
                            <h:outputText value="#{product4.label}" />
                        </p:commandLink>
                    </p:dataList>
                </p:panelGrid>
            </h:form>
        </h:body>
    </f:view>
</html>