<?xml version='1.0' encoding='UTF-8' ?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core">
    <p:remoteCommand name="gotoListMail" update="mainContent"
                     onstart="start()" onsuccess="finish()"
                     actionListener="#{mailListController.gotoListMail(mailController.currentMailType)}">
    </p:remoteCommand>
    <p:remoteCommand name="gotoDetails" update="mainContent"
                     onstart="start()" onsuccess="finish()"
                     actionListener="#{mailController.gotoDetails}">
    </p:remoteCommand>
    <c:forEach items="#{mailController.mails}" var="mail">
        <li class="mail-item">
            <a href="#" onclick="gotoDetails([{name:'mailId', value:'#{mail.mailId}'},{name:'rowNum', value:'#{mail.rowNum}'}]);">
                <h4>
                    #{mail.from}
                    <small>#{mail.displayFromName}</small>
                </h4>
                <h5>
                    #{mail.displaySubject}

                    <c:if test="#{not empty mail.issueCode}">
                        <label class="label label-default">
                            #{mail.issueCode}
                        </label>
                    </c:if>
                </h5>
                <p>
                    #{mail.displayBodyOnList}
                </p>
            </a>
        </li>
    </c:forEach>
</ui:composition>
