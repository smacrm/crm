<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <c:set var="mode" value="edit" scope="request" />
    <h:form prependId="false">
        <h:panelGrid width="100%" styleClass="page-header">
            <f:facet name="header">
                <!-- Content Header (Page header) -->
                <div class="row">
                    <div class="col-md-6">
                        <h1>
                            #{customize['label.setting']}
                        </h1>
                    </div>
                    <div class="col-md-6 text-right">
                        <p:commandButton value="#{msg['label.back']}" icon="fa fa-chevron-circle-left" actionListener="#{customizeController.reload()}" 
                                         update="mainContent" onstart="start()" onsuccess="finish()">
                            <p:confirm header="#{msg['label.confirm']}" message="#{msg['label.message.confirm.back']}" icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton actionListener="#{customizeController.showUpdateForm(renderController.page, 0)}"
                                         update="mainContent" value="#{customize['label.btn.edit']}"
                                         title="#{customize['label.btn.edit']}" icon="fa fa-pencil"
                                         onstart="start()" onsuccess="finish()" />
                        <p:commandButton value="#{customize['label.btn.save']}" icon="fa fa-check-circle" 
                                update="mainContent, @this" onstart="start()" onsuccess="finish()"
                                actionListener="#{renderController.saveFormData(1)}"
                                 rendered="#{mode eq 'edit'}" />
                    </div>
                </div>
            </f:facet>
        </h:panelGrid>
        <div class="box box-widget">
            <div class="box-body">
                <p:tabView styleClass="customize-tabview">
                    <ui:include src="/modules/customize/tab.xhtml">
                        <ui:param name="page" value="#{renderController.page.pageType == 2 ? renderController.page.pageName : renderController.page.pageId}"/>
                        <ui:param name="type" value="#{renderController.page.pageType}"/>
                        <ui:param name="target" value="301"/>
                        <ui:param name="mode" value="#{mode}"/>
                    </ui:include>
                </p:tabView>
            </div>
        </div>
        <h:outputStylesheet library="plugins" name="multipleselect/jquery.multiselect.css"/>
        <h:outputScript library="plugins" name="multipleselect/jquery.multiselect.min.js"/>
        <h:outputScript library="plugins" name="multipleselect/jquery.multiselect.#{localeController.locale}.js"/>
        <h:outputScript library="formbuilder" name="form-render.js"/>
        <h:outputScript library="js" name="customize-render.js"/>
    </h:form>
</ui:composition>
