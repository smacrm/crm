<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <!-- Chat: style can be found in dropdown.less-->
    <h:outputFormat id="userPanel">
        <c:set var="hasRemoteMemberLogo" value="#{loginController.member.hasRemoteMemberLogo()}"/>
        <li class="dropdown user">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="#{hasRemoteMemberLogo ? 'padding: 0; border-radius: 50%; overflow: hidden; margin: 5px 10px; width: 40px; height: 40px; text-align: center;' : ''}">
                <c:choose>
                    <c:when test="#{hasRemoteMemberLogo}">
                        <p:graphicImage value="#{loginController.member.streamedMemberImageContent}" title="#{loginController.member.member.memberNameFull}"
                                        style="width: 40px;" cache="false"/>
                    </c:when>
                    <c:otherwise>
                        <i class="fa fa-user"></i>
                    </c:otherwise>
                </c:choose>
            </a>
            <div class="dropdown-menu">
                <p:commandLink action="#{loginController.doLogout}" ajax="false" title="#{msg['label.logout']}" styleClass="pull-right" style="margin-right: 0.5em;margin-top: 0.3em;">
                    <span class="fa fa-sign-out"></span>
                </p:commandLink>
                <div class="row" style="margin: 0.3em;padding-left: 1em;">
                    <h4>
                        <h:outputText value=" #{loginController.member.firstName}" />
                        <h:outputText value="#{loginController.member.lastName}" rendered="#{! empty loginController.member.lastName}"/>
                        <br/>
                        <small>
                            <p:commandLink actionListener="#{memberController.show}" update=":mainContent">
                                <span class="fa fa-user" style="margin-top: 0.5em;font-size: 95%">
                                    <h:outputText style="padding-left: 0.5em;" value="#{msg['label.profile']}" />
                                </span>
                                <f:param name="showType" value="view"/>
                                <f:param name="memberId" value="#{loginController.member.userId}"/>
                                <f:param name="force" value="true"/>
                            </p:commandLink>
                        </small>
                    </h4>
                </div>
            </div>
        </li>
    </h:outputFormat>
</ui:composition>