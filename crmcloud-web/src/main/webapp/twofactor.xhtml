<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <h:head>
<!--        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <title>CRMCloud</title>
         Tell the browser to be responsive to screen width 
        <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"/>
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />-->
        <title>${msg['label.menu.IssueController']}</title>
        <ui:include src="/blocks/common/meta.xhtml"/>
        <!-- Bootstrap 3.3.5 -->
        <h:outputStylesheet library="bootstrap" name="css/bootstrap.css"/>

        <!-- Font Awesome -->
        <!--<h:outputStylesheet library="css" name="font-awesome.min.css"/>-->
        <!--        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"/>-->
        <!-- Ionicons -->
        <!--        <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css"/>-->
        <h:outputStylesheet library="css" name="ionicons.min.css"/>
        <!-- Theme style -->
        <h:outputStylesheet library="dist" name="css/AdminLTE.css"/>
        <!-- AdminLTE Skins. Choose a skin from the css/skins
             folder instead of downloading all of them to reduce the load. -->
        <h:outputStylesheet library="dist" name="css/skins/_all-skins.min.css"/>
        <!-- iCheck -->
        <h:outputStylesheet library="plugins" name="iCheck/flat/blue.css"/>
        <!-- jvectormap -->
        <h:outputStylesheet library="plugins" name="jvectormap/jquery-jvectormap-1.2.2.css"/>
        <!-- Date Picker -->
        <!--        <h:outputStylesheet library="plugins" name="datepicker/datepicker3.css"/>-->
        <!-- Daterange picker -->
        <!--<h:outputStylesheet library="plugins" name="daterangepicker/daterangepicker-bs3.css"/>-->
        <!-- bootstrap wysihtml5 - text editor -->
        <h:outputStylesheet library="plugins" name="bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css"/>
        <h:outputStylesheet library="css" name="nprogress.css"/>

        <h:outputScript library="scripts" name="pfcrud.js"/>
        <h:outputStylesheet library="css" name="pfcrud.css"/>
        <h:outputStylesheet library="css" name="application.css"/>
        <h:outputStylesheet library="css" name="search-filter.css"/>

        <f:facet name="last">
            <h:outputStylesheet library="css" name="growl.css"  />
            <h:outputStylesheet library="css" name="primefaces-override.css"/>
            
            <h:outputScript library="bootstrap" name="js/bootstrap.min.js"/>
            <h:outputScript library="dist" name="js/app.js"/>
            <h:outputScript library="dist" name="js/demo.js"/>
            <h:outputScript library="scripts" name="nprogress.js"/>
            <h:outputScript library="js" name="mousetrap.min.js"/>
            <h:outputScript library="js" name="application.js"/>
        </f:facet>
        <f:facet name="first">
            <script type="text/javascript">
                var LANG='#{localeController.locale}';
            </script>
        </f:facet>
    </h:head>

    <h:body style="overflow:hidden;overflow-y:hidden;overflow-x:hidden;" class="hold-transition ${(loginController.member.theme != null)?loginController.member.theme:'skin-blue'} sidebar-mini" id="issueBlockUI">
        
        <p:growl id="growl" showDetail="false" life="5000" />
        <ui:include src="/blocks/infile/loading.xhtml"/>

        <div class="wrapper">

            <header class="main-header">
                <ui:include src="/blocks/logo_2fa.xhtml"/>
                <!-- Header Navbar: style can be found in header.less -->
                <ui:include src="/blocks/navigation_2fa.xhtml"/>
            </header>

            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper" style="margin-left: 0">
                <!-- Main content -->
                <section class="content">
                    <div class="col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-3">
                        <h:form prependId="false">
                            <div class="box no-resize box-solid box-primary" style="overflow: hidden">
                                <div class="box-header">#{msg['label.two.authen.message']}</div>
                                <div class="box-body">
                                    <div class="form-inline">
                                        <div class="form-group">
                                            <label for="code">#{msg['label.code']}</label>
                                            <p:spacer width="20" height="10" />
                                            <h:inputText styleClass="form-control" id="code" a:placeholder="#{msg['label.code']}" value="#{loginController.code}" maxlength="6"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="box-footer">
                                    #{msg['label.otp.message']}
                                    <h:commandLink id="validate2FA" styleClass="btn btn-primary pull-right" actionListener="#{loginController.validate2FA()}" value="#{msg['label.confirm']}" />
                                </div>
                            </div>
                            <p:defaultCommand target="validate2FA" />
                        </h:form>
                    </div>
                </section><!-- /.content -->
            </div><!-- /.content-wrapper -->

            <!-- Control Sidebar -->
            <aside class="control-sidebar control-sidebar-dark">
                <ui:include src="/blocks/sidebar_right.xhtml"/>
            </aside><!-- /.control-sidebar -->

            <!-- Add the sidebar's background. This div must be placed
                 immediately after the control sidebar -->
            <div class="control-sidebar-bg"></div>
        </div>
        <!-- ################################################################################ -->
        
        <script type="text/javascript">
            $(function(){
                $("#code").focus();
            })
            function start() {
                var cssClass = $("body").attr("class");
                NProgress.start(cssClass);
            }

            function finish() {
                NProgress.done();
            }

        </script>

        <!-- Page Loading Effect -->
        <script>var HN = [];
            HN.factory = function (e) {
                return function () {
                    HN.push([e].concat(Array.prototype.slice.call(arguments, 0)))
                };
            }, HN.on = HN.factory("on"), HN.once = HN.factory("once"), HN.off = HN.factory("off"), HN.emit = HN.factory("emit"), HN.load = function () {
                var e = "hn-button.js";
                if (document.getElementById(e))
                    return;
                var t = document.createElement("script");
                t.id = e, t.src = "//hn-button.herokuapp.com/hn-button.js";
                var n = document.getElementsByTagName("script")[0];
                n.parentNode.insertBefore(t, n)
            }, HN.load();

        </script>
        <script type="text/javascript">
            function resize() {
                var windowHeight = $(window).height();
                var mainSidebarHeight = windowHeight - $(".main-header").outerHeight();
                var userPanelHeight = $("#sidebar .user-panel").outerHeight();
                var sectionHeaderHeight = 2 * $("#sidebar .sidebar-menu .header").outerHeight();
                var sectionProjectHeight = $("#sidebar .sidebar-menu #projectTree > ul").outerHeight();
                $("#sidebar .sidebar-menu #mailTree > ul").height(mainSidebarHeight-userPanelHeight-sectionHeaderHeight-sectionProjectHeight-25);
                $(".box").not('.no-resize').height(windowHeight - $("#pngHeader").height() - $("#navigation").height() - 125);
            }
            $(function() {
                resize();
            });
            $(window).on('resize', function () {
                resize();
            });
        </script>
    </h:body>
</html>